import{d as z,r as m,b as K,c as n,z as I,o as d,k as T,w as l,f as y,t as O,e as q,q as P,g as e,j as r,A as h,B as L,l as X,C as Z,i as ee,_ as te}from"./index-3e61b4b7.js";import{a as le,b as ae,e as oe}from"./user-f4d7eea8.js";const ne={class:"el-dialog__title"},se={key:0,class:"color-danger m-l-5 text-3.5"},ie={class:"dialog-footer"},ue=z({__name:"model-save",props:{modalTitle:{},editData:{},requestApi:{}},emits:["close"],setup(A,{emit:$}){var v;const U=A,c=$,_=(v=L())==null?void 0:v.proxy,f=m(!1),i=U.modalTitle==="修改模型",C=m(),s=K(U.editData),w={userName:[{required:!0,message:"请输入模型名称"}],email:[{required:!0,message:"请输入模型编码"}],status:[{required:!0,message:"请输入模型所在数据库表"}]},k=(g=!1)=>{c("close",g)},R=g=>{g&&g.validate(a=>{a&&(f.value=!0,U.requestApi(s).then(({msg:b})=>{_==null||_.$message.success(b??"操作成功"),k(!0)}).finally(()=>{f.value=!1}))})};return(g,a)=>{const b=n("el-input"),D=n("el-form-item"),N=n("el-radio"),p=n("el-radio-group"),t=n("el-form"),S=n("el-button"),V=n("el-dialog"),B=I("loading");return d(),T(V,{"model-value":!0,width:"35%","close-on-click-modal":!1,"before-close":()=>k()},{header:l(()=>[y("span",ne,O(g.modalTitle),1),i?(d(),q("span",se,"提示：修改后可能导致物料设置的失效")):P("",!0)]),footer:l(()=>[y("span",ie,[e(S,{loading:f.value,onClick:a[3]||(a[3]=u=>k())},{default:l(()=>a[8]||(a[8]=[r("取消")])),_:1},8,["loading"]),e(S,{loading:f.value,type:"primary",onClick:a[4]||(a[4]=u=>R(C.value))},{default:l(()=>a[9]||(a[9]=[r(" 提交 ")])),_:1},8,["loading"])])]),default:l(()=>[h((d(),T(t,{ref_key:"ruleFormRef",ref:C,model:s,rules:w,"label-width":"auto","label-position":"right"},{default:l(()=>[e(D,{prop:"userName",label:"用户名称"},{default:l(()=>[e(b,{modelValue:s.userName,"onUpdate:modelValue":a[0]||(a[0]=u=>s.userName=u),modelModifiers:{trim:!0},placeholder:"请输入用户名称"},null,8,["modelValue"])]),_:1}),e(D,{prop:"email",label:"用户邮箱"},{default:l(()=>[e(b,{modelValue:s.email,"onUpdate:modelValue":a[1]||(a[1]=u=>s.email=u),modelModifiers:{trim:!0},placeholder:"请输入用户邮箱",disabled:i},null,8,["modelValue"])]),_:1}),e(D,{prop:"status",label:"用户状态"},{default:l(()=>[e(p,{modelValue:s.status,"onUpdate:modelValue":a[2]||(a[2]=u=>s.status=u)},{default:l(()=>[e(N,{value:"1"},{default:l(()=>a[5]||(a[5]=[r("冻结")])),_:1}),e(N,{value:"2"},{default:l(()=>a[6]||(a[6]=[r("正常")])),_:1}),e(N,{value:"3"},{default:l(()=>a[7]||(a[7]=[r("锁定")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])),[[B,f.value]])]),_:1},8,["before-close"])}}}),de={key:0,style:{color:"#e6a23c","font-weight":"bolder"}},re={key:1,style:{color:"#67c23a","font-weight":"bolder"}},pe={key:2,style:{color:"#f56c6c","font-weight":"bolder"}},me={key:3},_e=z({name:"internal-menu"}),fe=z({..._e,setup(A){var N;const $=(N=L())==null?void 0:N.proxy,U=X(),c=m({userName:"",status:""}),_=m(!1),f=m([]),i=m({pageSize:10,pageNo:1,total:0}),C=m({}),s=m(!1),w=m(),k=m(),R=()=>{i.value={pageSize:10,pageNo:1,total:0}},v=()=>{_.value=!0,le({...c.value,...i.value}).then(p=>{i.value.total=p.data.totalNumber,f.value=p.data.list}).finally(()=>{_.value=!1})};v();function g(){R(),f.value=[],v()}function a(){$==null||$.$resetForm("queryRef"),R(),v()}const b=(p,t)=>{if(p==="add"){s.value=!0,w.value="新增用户",C.value={status:"1"},k.value=ae;return}if(p==="edit"&&t){s.value=!0,w.value="修改用户",k.value=oe,C.value={...t};return}},D=p=>{s.value=!1,p&&v()};return(p,t)=>{const S=n("LyPageWrapper"),V=n("el-button"),B=n("el-input"),u=n("el-form-item"),F=n("el-option"),M=n("el-select"),Q=n("el-form"),x=n("el-table-column"),W=n("InfoFilled"),j=n("el-icon"),E=n("el-tooltip"),Y=n("el-table"),G=n("ly-pagination"),H=I("loading");return d(),q("div",null,[e(S,{title:"快速开始一个营销策略",class:"mb16px"},{default:l(()=>t[6]||(t[6]=[y("div",{class:"mask-group f-c-b"},[y("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"促销敏感人群复购"),y("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"团购场景营销"),y("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"节假日精准营销"),y("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"新用户复购"),y("div",{class:"w200px h120px rounded-8px text-center line-height-120px"},"实时天气精准营销")],-1)])),_:1}),e(S,{title:ee(U).meta.title},{toolButton:l(()=>[e(V,{type:"primary",icon:"plus",onClick:t[0]||(t[0]=o=>b("add"))},{default:l(()=>t[7]||(t[7]=[r(" 创建用户 ")])),_:1})]),default:l(()=>[e(Q,{ref:"queryRef",model:c.value,inline:!0},{default:l(()=>[e(u,{prop:"userName"},{default:l(()=>[e(B,{modelValue:c.value.userName,"onUpdate:modelValue":t[1]||(t[1]=o=>c.value.userName=o),placeholder:"用户名称",clearable:"",maxlength:"50"},null,8,["modelValue"])]),_:1}),e(u,{prop:"status"},{default:l(()=>[e(M,{modelValue:c.value.status,"onUpdate:modelValue":t[2]||(t[2]=o=>c.value.status=o),class:"select-brand",placeholder:"用户状态",clearable:"",onClear:R,style:{width:"200px"}},{default:l(()=>[e(F,{label:"冻结",value:1}),e(F,{label:"正常",value:2}),e(F,{label:"锁定",value:3})]),_:1},8,["modelValue"])]),_:1}),e(u,null,{default:l(()=>[e(V,{type:"primary",icon:"Search",loading:_.value,onClick:t[3]||(t[3]=o=>g())},{default:l(()=>t[8]||(t[8]=[r(" 搜索 ")])),_:1},8,["loading"]),e(V,{icon:"Refresh",loading:_.value,onClick:a},{default:l(()=>t[9]||(t[9]=[r(" 重置 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),h((d(),T(Y,{data:f.value},{default:l(()=>[e(x,{label:"序号",type:"index",width:"55",align:"center"}),e(x,{label:"用户名称",prop:"userName"}),e(x,{label:"用户状态",prop:"status",width:"80"},{default:l(({row:o})=>[o.status==="1"?(d(),q("span",de,"冻结")):o.status==="2"?(d(),q("span",re,"正常")):o.status==="3"?(d(),q("span",pe,[t[10]||(t[10]=r(" 锁定 ")),o.failReason!=null?(d(),T(E,{key:0,content:o.failReason,placement:"top",effect:"light"},{default:l(()=>[e(j,{style:{transform:"translateY(2px)",cursor:"pointer"}},{default:l(()=>[e(W)]),_:1})]),_:2},1032,["content"])):P("",!0)])):(d(),q("span",me,"--"))]),_:1}),e(x,{label:"创建人",prop:"createUser",align:"center"}),e(x,{label:"创建时间",prop:"createTime"}),e(x,{label:"更新时间",prop:"updateTime"}),e(x,{label:"备注",prop:"remark"}),e(x,{label:"操作",align:"center",width:"110",fixed:"right"},{default:l(({row:o})=>[e(V,{type:o.status===1||o.status===3?"":"primary",disabled:o.status===1||o.status===3,link:"",plain:"",onClick:J=>b("view",o)},{default:l(()=>t[11]||(t[11]=[r(" 查看 ")])),_:2},1032,["type","disabled","onClick"]),e(V,{type:o.status===1?"":"primary",disabled:o.status===1,link:"",plain:"",onClick:J=>b("edit",o)},{default:l(()=>t[12]||(t[12]=[r(" 修改 ")])),_:2},1032,["type","disabled","onClick"])]),_:1})]),_:1},8,["data"])),[[H,_.value]]),h(e(G,{page:i.value.pageNo,"onUpdate:page":t[4]||(t[4]=o=>i.value.pageNo=o),limit:i.value.pageSize,"onUpdate:limit":t[5]||(t[5]=o=>i.value.pageSize=o),total:i.value.total,onPagination:v},null,8,["page","limit","total"]),[[Z,i.value.total>0]])]),_:1},8,["title"]),s.value?(d(),T(ue,{key:0,"modal-title":w.value,"edit-data":C.value,"request-api":k.value,onClose:D},null,8,["modal-title","edit-data","request-api"])):P("",!0)])}}});const ge=te(fe,[["__scopeId","data-v-c7ae1047"]]);export{ge as default};
//# sourceMappingURL=index-82129d43.js.map
