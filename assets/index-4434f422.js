import{d as q,r as m,u as T,a as B,b as F,c as u,o as b,e as k,f as L,g as n,w as o,F as P,h as D,i as E,j as w,k as $}from"./index-4e8621ec.js";import{g as A}from"./user-64375c57.js";const U=[{label:"本地",value:"http://192.168.125.241:3012/user-tower/auth-redirect",dataPortalUrl:"http://localhost:3014/transfer.html#",commRedirectUrl:"https://web-dev.shuxinyc.shop/#/",abTestUrl:"http://localhost:3014/abtest-web/transfer.html#/auth-redirect"},{label:"开发",value:"https://cdp-dev.shuxinyc.shop/user-tower/auth-redirect",dataPortalUrl:"https://data-portal-dev.shuxinyc.shop/transfer.html#",commRedirectUrl:"https://web-dev.shuxinyc.shop/#/",abTestUrl:"https://abtest-mng-dev.shuxinyc.shop/abtest-web/transfer.html#/auth-redirect"},{label:"测试",value:"https://cdp-qa.shuxinyc.shop/user-tower/auth-redirect",dataPortalUrl:"https://data-portal-qa.shuxinyc.shop/transfer.html#",commRedirectUrl:"https://web-test.shuxinyc.shop/#/",abTestUrl:"https://abtest-mng-qa.shuxinyc.shop/abtest-web/transfer.html#/auth-redirect"},{label:"生产",value:"https://cdp.shuxinyc.shop/user-tower/auth-redirect",dataPortalUrl:"https://data-portal.shuxinyc.shop/transfer.html#",commRedirectUrl:"https://web.shuxinyc.shop/#/",abTestUrl:"https://abtest-mng.shuxinyc.shop/abtest-web/transfer.html#/auth-redirect",disabled:!0}],K={class:"home-waraper"},j={class:"form-container w-35%"},J=q({__name:"index",setup(G){var x;const V={children:"children",label:"label"},f=m(),i=T(),_=B(),v=m([{id:"1",label:"人群智库",path:"",name:"",meta:{title:"人群智库"},children:[{id:"1-1",label:"用户群体",path:"/user-tower",name:"user-tower",meta:{title:"用户群体"}},{id:"1-2",label:"人群洞察",path:"/crowd-insight",name:"crowd-insight",meta:{title:"人群洞察"}}]},{id:"2",label:"标签管理",path:"",name:"",meta:{title:"标签管理"},children:[{id:"2-1",label:"用户标签",path:"/user-label",name:"user-label",meta:{title:"用户标签"}}]},{id:"5",label:"报表中心",path:"/report-center",name:"report-center",meta:{title:"报表中心",link:"/home/index"},children:[]},{id:"6",label:"ABTest",path:"",name:"",meta:{title:"ABTest"},children:[{id:"6-1",label:"应用管理",path:"/app-manage",name:"/app-manage",meta:{title:"应用管理"}},{id:"6-2",label:"实验层",path:"/experiment-manage-list",name:"experiment-manage-list",meta:{title:"实验层"}},{id:"6-3",label:"实验列表",path:"/experiment-manage-layer",name:"experiment-manage-layer",meta:{title:"实验列表"}}]}]),c=m(),d=m({env:(x=i.env)!=null&&x.label?i.env:U[0],phoneNumber:i.phoneNumber||"18228329236",token:i.token,groupId:"267356",menuList:[]}),N=F({env:[{required:!0,message:"请选择"}],phoneNumber:[{required:!0,validator:(a,e,t)=>{e===""?t(new Error("请输入手机号")):/^1[3-9]\d{9}$/.test(e)?t():t(new Error("请输入正确手机号"))}}],token:[{required:!0,message:"请输入token"}],groupId:[{required:!0,message:"请输入集团id"}]});(()=>{A().then(a=>{i.login(a.data)})})();const R=a=>v.value.filter(t=>{var p;const s=a.includes(t.id),l=(p=t.children)==null?void 0:p.some(h=>a.includes(h.id));return!(!s&&!l)}).map(t=>{var s;return{...t,children:(s=t.children)==null?void 0:s.filter(l=>a.includes(l.id))}}),C=()=>{let a=[];const e=(t,s)=>{t.forEach(l=>{s&&a.push(l.id),l.children&&e(l.children,!0)})};return e(i.menuList,!1),a.length?a:["1","2","3","4","5"]},g=(a,e)=>{a&&a.validate(t=>{if(t){const s=f.value.getCheckedKeys();i.setUserInfo({...d.value,menuList:R(s)}),e==="1"?_.push("/label-tank"):e==="2"&&_.push("/system")}})};return(a,e)=>{const t=u("el-option"),s=u("el-select"),l=u("el-form-item"),p=u("el-input"),h=u("el-tree"),y=u("el-button"),I=u("el-form");return b(),k("div",K,[L("div",j,[n(I,{ref_key:"ruleFormRef",ref:c,model:d.value,rules:N,"label-width":"auto"},{default:o(()=>[n(l,{prop:"env",label:"接入外部系统环境:"},{default:o(()=>[n(s,{modelValue:d.value.env,"onUpdate:modelValue":e[0]||(e[0]=r=>d.value.env=r)},{default:o(()=>[(b(!0),k(P,null,D(E(U),r=>(b(),$(t,{key:r,label:r.label,value:r,disabled:r.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(l,{prop:"groupId",label:"集团id:"},{default:o(()=>[n(p,{modelValue:d.value.groupId,"onUpdate:modelValue":e[1]||(e[1]=r=>d.value.groupId=r),placeholder:"请输入集团id",clearable:"",maxlength:"20",disabled:""},null,8,["modelValue"])]),_:1}),n(l,{prop:"token",label:"商业化平台token:"},{default:o(()=>[n(p,{modelValue:d.value.token,"onUpdate:modelValue":e[2]||(e[2]=r=>d.value.token=r),placeholder:"请输入商业化平台token",clearable:""},null,8,["modelValue"])]),_:1}),n(l,{prop:"menuList",label:"菜单权限:"},{default:o(()=>[n(h,{ref_key:"treeRef",ref:f,style:{width:"200px"},data:v.value,"show-checkbox":"","node-key":"id",props:V,"default-expand-all":"","default-checked-keys":C()},null,8,["data","default-checked-keys"])]),_:1}),n(l,{label:" "},{default:o(()=>[n(y,{type:"primary",onClick:e[3]||(e[3]=r=>g(c.value,"1"))},{default:o(()=>[w("跳转至商业化平台对接")]),_:1}),n(y,{type:"primary",onClick:e[4]||(e[4]=r=>g(c.value,"2"))},{default:o(()=>[w("跳转至内部系统")]),_:1})]),_:1})]),_:1},8,["model","rules"])])])}}});export{J as default};
//# sourceMappingURL=index-4434f422.js.map
